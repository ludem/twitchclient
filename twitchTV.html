<!DOCTYPE html>
<html>
    <head>
        <style>
        </style>
    </head>
    <body>
        <p>Testing TwitchTV api</p>
    </body>
    <script>
        const streamers = ["ESL_SC2", "OgamingSC2", "cretetion", "freecodecamp", "Pandagirl91", "miss_rage", "RobotCaleb", "noobs2ninjas", "SaltyBet"]
                
        const callTwitchAPI = action => streamer => {
           const endpoint =  `https://wind-bow.glitch.me/twitch-api/${action}/${streamer}/`;
            return fetch(endpoint)
                   .then(blob => blob.json())
        }

        const callTwitchChannel = callTwitchAPI('channels');
        const callTwitchStream = callTwitchAPI('streams');

        const usersInfo = Promise.all(
            streamers.map(x => Promise.all(
                [callTwitchChannel(x), callTwitchStream(x)])
        )).then(usersInfo => console.log(usersInfo));
    </script>
</html>